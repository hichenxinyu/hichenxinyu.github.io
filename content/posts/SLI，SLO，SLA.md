---
title: Redis 持久化
date: 2020-04-17
layout: post
tags: SRE
---

先来说一下这三个单词SLI，SLO，SLA分别是什么

- SLI：service level indicator  服务水平指标

- SLO：service level objectives 服务水平目标

- SLA：service level agreement  服务水平协议



一句话来总结就是

> 选择SLI，设定SLO，给出SLA



### 什么是SLI？

SLI（服务水平指标）衡量对SLO（服务水平目标）的遵守情况。因此，例如，如果您的SLA指定您的系统将在99.95％的时间内可用，那么您的SLO很有可能达到99.95％的正常运行时间，而SLI就是对正常运行时间的实际衡量。也许是99.96％。也许99.99％。为了遵守您的SLA，SLI必须达到或超过该文档中所作的承诺。

SLI的挑战

与SLO一样，SLI的挑战在于保持它们简单，选择要跟踪的正确指标，以及通过跟踪太多对客户实际上不重要的指标而不会使IT工作复杂化。

### 什么是SLO？

SLO（服务水平目标）是SLA中关于特定指标（例如正常运行时间或响应时间）的协议。因此，如果SLA是您与客户之间的正式协议，则SLO是您向该客户作出的个人承诺。SLO可以设定客户期望，并告诉IT和DevOps团队[需要达到和衡量自己的目标](https://www.atlassian.com/blog/opsgenie/measuring-and-evaluating-service-level-objectives)。

### SLO的挑战

SLO比SLA的仇恨要小，但是如果SLO含糊，过于复杂或无法衡量，则可能会产生同样多的问题。SLO的关键在于，简单性和清晰度是不会让您的工程师想要扯皮的。只有最重要的指标才有资格获得SLO状态，目标应以通俗易懂的语言阐明，并且与SLA一样，它们应始终解决诸如客户端延迟之类的问题。





**SLA（服务水平协议）是提供商与客户之间关于可衡量指标（例如正常运行时间，响应能力和责任）的协议。** 

这些协议通常是由公司的新业务和法律团队起草的，它们代表了您对客户的承诺-以及如果您无法兑现这些承诺的后果。通常，后果包括罚款，服务积分或许可证扩展。



### SLA的挑战

[众所周知，SLA很难衡量，报告和满足](https://www.atlassian.com/it-unplugged/best-practices-and-trends/stop-hating-on-slas)。这些协议通常是由不在技术领域的人自己写的，通常会给团队带来难以兑现的承诺，并不总是与当前和不断发展的业务重点保持一致，也没有考虑到细微差别。 

例如，SLA可以保证团队将在24小时内解决产品X的已报告问题。但是，如果客户需要24小时发送答案或屏幕截图来帮助您的团队诊断问题，那么同一SLA并不能说明会发生什么。这是否意味着团队的24小时窗口被客户的慢速吞噬了，还是时钟根据客户的响应时间开始和停止？SLA需要回答这些问题，但是它们常常不这样做-这已经引起了IT经理对其的敌意。

对于许多专家而言，应对这一挑战的答案首先是，技术应参与SLA的创建。IT和DevOps与法律和业务开发合作开发可解决现实情况的SLA的次数越多，SLA就会开始反映关键的现实情况，例如客户推迟解决自己的问题。



### 并非每个可跟踪指标都应该是SLI

同样，对于10个SLO中的每个SLO跟踪10个组件的性能可能很快就会变得笨拙。取而代之的是，从战略上选择对您的核心SLO真正重要的指标，并投入精力来有效地跟踪这些指标。

### 包括IT团队无法控制的因素

[当客户端使解决时间变慢时，](https://www.atlassian.com/it-unplugged/best-practices-and-trends/stop-hating-on-slas)会发生什么？如果您在SLA中对此不太清楚，则您的团队可能会面临无法解决客户问题的不可能的标准，而无需客户的参与。

### 建立错误预算

为失败留有余地，不仅可以保护业务免受违反SLA的行为和严重后果的影响，而且还为敏捷性留出了空间-团队可以快速进行更改并有空间尝试可能失败的创新解决方案。 

Google实际上建议您将剩余的错误预算用于计划内的停机时间，这可以帮助您确定无法预料的问题（例如，不当使用服务器的服务）并保持客户的适当期望。

### 不要为月亮射击

仅仅因为您的团队可以维持99.99％的正常运行时间，并不意味着99.99％应该是您的SLO编号。承诺不足和超额投放总是更好的选择。对于想要早点启动且经常需要错误预算以保持快速发展的敏捷团队而言，尤其如此。

### 这对SRE有何影响？

对于遵循Google模型并使用[站点可靠性工程（SRE）团队](https://www.atlassian.com/incident-management/devops/sre)来弥合开发与运营之间的鸿沟的人们来说，SLA，SLO和SLI是成功的基础。SLA帮助团队设置界限和错误预算。SLO帮助确定工作的优先级。SLI告诉SRE他们何时需要冻结所有启动以节省濒临失败的错误预算，以及何时可以放松控制。